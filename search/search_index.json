{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Homelab DevOps Overview","text":"<p> Golden Path \u2014 lint \u2192 plan \u2192 approve \u2192 apply \u2192 configure \u2192 monitor \u2192 smoke across AWS &amp; homelab (Proxmox/NFS). Built with Terraform \u00b7 Ansible \u00b7 Docker \u00b7 Prometheus \u00b7 Grafana \u00b7 GitHub Actions \u00b7 Jenkins \u00b7 MkDocs.</p> <p> </p>"},{"location":"#pipeline-at-a-glance","title":"Pipeline at a glance","text":"<pre><code>flowchart TD\n  A[Developer Laptop] --&gt;|Git Push| B[GitHub Actions / Jenkins]\n  B --&gt;|Static Checks| C[pre-commit \u00b7 TFLint \u00b7 Checkov \u00b7 Ansible-lint \u00b7 Hadolint]\n  B --&gt;|Plan| D[Terraform Plan]\n  D --&gt;|Manual Gate| E[Approve]\n  E --&gt;|Apply| F[Terraform Apply]\n  F --&gt;|Configure| G[Ansible Playbooks]\n  G --&gt;|Deploy/Proxy| H[Docker Reverse Proxy]\n  G --&gt;|Deploy Monitoring| M[Node Exporter]\n  F --&gt;|Alt Target| I[Proxmox VM + NFS]\n  G --&gt;|Smoke Tests| J[Health Checks]\n  M --&gt;|Metrics| K[Prometheus + Grafana]</code></pre>"},{"location":"#projects","title":"\ud83d\udcc1 Projects","text":"<ul> <li>\ud83c\udfd7\ufe0f Terraform Infrastructure - Multi-environment AWS provisioning (dev/staging/prod)</li> <li>\ud83e\udd16 Ansible Automation - Configuration management with Vault secrets</li> <li>\ud83d\udcca Monitoring Stack - Prometheus + Grafana + AlertManager with Slack alerts</li> <li>Docker / Reverse Proxy - Containerized services with Nginx</li> <li>\ufffd NEW: Secrets Management - Ansible Vault encryption for credentials</li> <li>\ud83c\udf0d NEW: Multi-Environment - Terraform workspaces for dev/staging/prod</li> <li>\ud83d\udea8 NEW: Production Alerting - 15+ alert rules with runbooks</li> <li>\ud83d\udcbe NEW: Backup &amp; DR - Automated backup/restore scripts</li> </ul>"},{"location":"#about-this-lab","title":"\ud83c\udfaf About This Lab","text":"<p>This homelab demonstrates production-ready DevOps practices:</p> <p>\u2705 Git-based workflows with CI/CD \u2705 Infrastructure as Code (Terraform with multi-environment) \u2705 Configuration management (Ansible with encrypted secrets) \u2705 Full observability stack (Prometheus + Grafana + AlertManager) \u2705 Production alerting with Slack integration \u2705 Docker containerization with reverse proxy \u2705 Security hardening (SELinux, systemd, Ansible Vault) \u2705 Automated testing &amp; validation \u2705 Disaster recovery (backup/restore automation)</p> <p>Goal: Operate like production infrastructure in a homelab, demonstrating enterprise-grade DevOps skills.</p>"},{"location":"#quick-start","title":"\ud83d\ude80 Quick Start","text":""},{"location":"#monitoring-stack","title":"Monitoring Stack","text":"<pre><code># Start Prometheus + Grafana\nmake mon-up\n\n# Access Grafana at http://localhost:3001\n</code></pre>"},{"location":"#deploy-node-exporter-to-hosts","title":"Deploy Node Exporter to Hosts","text":"<pre><code>cd ansible\nansible-playbook playbooks/deploy-monitoring.yml\n</code></pre>"},{"location":"#provision-infrastructure","title":"Provision Infrastructure","text":"<pre><code>cd terraform/aws-ec2\nterraform init &amp;&amp; terraform plan\n</code></pre>"},{"location":"#tech-stack","title":"\ud83d\udee0\ufe0f Tech Stack","text":"Component Technology Infrastructure Terraform, AWS EC2, Proxmox Configuration Ansible, systemd Monitoring Prometheus, Grafana, Node Exporter, cAdvisor Containers Docker, Docker Compose CI/CD GitHub Actions, Jenkins, pre-commit Documentation MkDocs Material <p>Built by Stephon Skipper | Portfolio Site</p>"},{"location":"README-site-notes/","title":"Docs","text":"<p>Planned diagram of workflow (Terraform \u2192 Ansible \u2192 Docker \u2192 CI).</p>"},{"location":"ansible/","title":"Ansible Automation","text":"<p>My homelab uses Ansible to automatically configure and deploy workloads across:</p> <ul> <li>\ud83c\udfe0 Proxmox VMs (Docker nodes, NGINX proxy, Wazuh, PBS)</li> <li>\u2601\ufe0f AWS EC2 instances (created via Terraform)</li> <li>\ud83d\uddc3\ufe0f 45Drives NFS storage</li> <li>\ud83d\udd10 Security services (hardening, users, SSH, fail2ban)</li> <li>\ud83d\udce6 Application stack (Docker containers, monitoring, reverse proxy)</li> </ul> <p>This ensures consistent, repeatable infrastructure both at home and in the cloud.</p>"},{"location":"ansible/#end-to-end-automation-flow","title":"\ud83d\ude80 End-to-End Automation Flow","text":"<pre><code>flowchart LR\n  Git[Developer Commit] --&gt; CI[CI Pipeline: lint/validate/test]\n  CI --&gt; Terraform[Terraform Apply]\n  Terraform --&gt; Inventory[Generate Dynamic Inventory]\n  Inventory --&gt; Ansible[Run Ansible Playbooks]\n  Ansible --&gt; Deploy[Deploy Apps &amp; Config]\n  Deploy --&gt; Health[Smoke Tests / Health Checks]</code></pre>"},{"location":"ansible/#example-inventory","title":"\ud83d\udccb Example Inventory","text":"<pre><code>[proxmox]\ndockenode1 ansible_host=192.168.1.201\ndockenode2 ansible_host=192.168.1.202\nwazuh ansible_host=192.168.1.203\nproxy ansible_host=192.168.1.204\npbs ansible_host=192.168.1.205\n\n[aws]\naws-prod ansible_host=54.123.45.67\n</code></pre>"},{"location":"ansible/#example-playbook","title":"\ud83d\udcdd Example Playbook","text":"<pre><code>- name: Base configuration\n  hosts: all\n  become: yes\n\n  roles:\n    - common      # users, system settings\n    - security    # firewall, fail2ban, ssh hardening\n    - docker      # docker + compose install\n</code></pre>"},{"location":"ansible/#ansible-execution-screenshot","title":"\u2705 Ansible Execution Screenshot","text":"<p>Below is a real run of my Ansible playbook against my homelab VMs:</p> <p></p>"},{"location":"ansible/#ansible-workflow-diagram","title":"\ud83d\udd27 Ansible Workflow Diagram","text":"<pre><code>flowchart LR\n  GH[Git Push to GitHub] --&gt; CI[CI Pipeline]\n  CI --&gt; Lint[Lint + Security Scan]\n  CI --&gt; Deploy[Run Ansible Playbook]\n  Deploy --&gt; Proxmox[Configure Proxmox VMs]\n  Deploy --&gt; AWS[Configure AWS EC2 Instance]\n  Proxmox --&gt; Services[Deploy Homelab Services]\n  AWS --&gt; Services\n  Services --&gt; Smoke[Smoke Tests / Health Checks]</code></pre>"},{"location":"ansible/#example-inventory-production","title":"\ud83d\udccb Example Inventory (Production)","text":"<pre><code>[proxmox]\n192.xxx.x.xxx\n192.xxx.x.xxx\n\n[aws]\n3.89.xx.xx\n</code></pre>"},{"location":"ansible/#demo-playbook-example","title":"\ud83d\udcdd Demo Playbook Example","text":"<pre><code>- name: Homelab Automation Demo\n  hosts: all\n  become: true\n\n  tasks:\n    - name: Ping test\n      ping:\n\n    - name: Ensure NGINX installed (example)\n      apt:\n        name: nginx\n        state: present\n      when: ansible_os_family == \"Debian\"\n</code></pre>"},{"location":"ansible/#monitoring-role","title":"\ud83d\udcca Monitoring Role","text":"<p>Automates deployment of Prometheus Node Exporter to infrastructure for metrics collection.</p>"},{"location":"ansible/#features","title":"Features","text":"<ul> <li>\u2705 Installs Node Exporter as systemd service</li> <li>\u2705 Automatic firewall configuration</li> <li>\u2705 Security hardening (unprivileged user, systemd protections)</li> <li>\u2705 Version management &amp; idempotent updates</li> <li>\u2705 Health check verification</li> </ul>"},{"location":"ansible/#quick-deploy","title":"Quick Deploy","text":"<pre><code># Deploy to all hosts\ncd ansible\nansible-playbook playbooks/deploy-monitoring.yml\n\n# Deploy to specific group\nansible-playbook playbooks/deploy-monitoring.yml --limit monitoring\n\n# Verify installation\nansible all -m uri -a \"url=http://localhost:9100/metrics status_code=200\"\n</code></pre>"},{"location":"ansible/#integration-with-prometheus","title":"Integration with Prometheus","text":"<p>After deployment, add hosts to <code>docker/monitoring-stack/prometheus/prometheus.yml</code>:</p> <pre><code>scrape_configs:\n  - job_name: 'node_exporter_homelab'\n    static_configs:\n      - targets:\n          - 'server1.local:9100'\n          - 'server2.local:9100'\n          - 'server3.local:9100'\n        labels:\n          environment: 'homelab'\n</code></pre> <p>See the monitoring role on GitHub for complete documentation.</p>"},{"location":"ansible/#security-role","title":"\ud83d\udd10 Security Role","text":"<p>Coming soon: Automated security hardening, SSH configuration, and fail2ban setup.</p>"},{"location":"architecture/","title":"Architecture","text":"<pre><code>flowchart LR\n  Dev[Developer] --&gt;|Git push| CI[GitHub Actions/Jenkins]\n  CI --&gt; Lint[pre-commit TFLint Checkov Hadolint ansible-lint]\n  CI --&gt; Plan[Terraform Plan] --&gt; Gate[Manual Approve] --&gt; Apply[Terraform Apply]\n  Apply --&gt; AWS[AWS EC2]\n  Apply --&gt; Proxmox[Proxmox VM]\n  Proxmox --&gt; NFS[45Drives NFS]\n  AWS --&gt; Ansible[Ansible Configure]\n  Proxmox --&gt; Ansible\n  Ansible --&gt; Proxy[Reverse Proxy Docker]\n  Proxy --&gt; Smoke[Health/Smoke]</code></pre>"},{"location":"architecture/#proxmox-virtualization-layer","title":"Proxmox Virtualization Layer","text":"<p>This node runs my core homelab workloads: Docker nodes, Nginx reverse proxy, Wazuh, an Ubuntu admin VM, NFS mount (45Drives), and Proxmox Backup Server (PBS).</p>"},{"location":"hire-me/","title":"Hire Me","text":"<p>Stephon \"Skip\" Skipper \u2014 DevOps Engineer</p> <ul> <li>3+ yrs Linux sysadmin \u00b7 IaC (Terraform/Ansible) \u00b7 CI/CD (Jenkins/GitHub Actions)  </li> <li>Homelab: Proxmox cluster, NFS, Docker, Prometheus/Grafana monitoring, security automation</li> <li>Focus: infrastructure automation, observability, security, and reliability</li> </ul> <p>Recent Highlights</p> <ul> <li>Full-Stack Monitoring: Prometheus + Grafana stack with automated Node Exporter deployment via Ansible</li> <li>Infrastructure as Code: Terraform modules with built-in testing and security scanning</li> <li>Security Automation: Zero-SSH EC2 (IMDSv2, encrypted volumes, SSM), systemd hardening, SELinux configurations</li> <li>CI/CD Excellence: Automated validation with TFLint, Checkov, Hadolint, ansible-lint, yamllint</li> <li>Configuration Management: Idempotent Ansible roles with firewall automation and health checks</li> <li>Documentation: Live documentation site with interactive diagrams and complete examples</li> </ul> <p>Portfolio</p> <ul> <li>\ud83d\udcd6 Live Documentation</li> <li>\ud83d\udcbb GitHub Repository</li> <li>\ud83c\udf10 Personal Site</li> </ul> <p>Contact</p> <ul> <li>\ud83d\udcbc LinkedIn: linkedin.com/in/stephon-skipper</li> <li>\ud83d\udce7 Email: stephon@ayoskip.info </li> <li>\ud83d\udc19 GitHub: iso-st3ph</li> </ul> <p>Why Hire Me?</p> <p>I don't just know the tools\u2014I build production-ready infrastructure that demonstrates real-world DevOps practices. This portfolio showcases end-to-end automation from infrastructure provisioning to monitoring, all with security best practices and comprehensive documentation.</p>"},{"location":"monitoring/","title":"Monitoring &amp; Observability","text":""},{"location":"monitoring/#overview","title":"Overview","text":"<p>This homelab includes a production-grade monitoring stack with Prometheus, Grafana, and AlertManager, providing real-time metrics, dashboards, and automated alerting with Slack integration for full infrastructure observability.</p>"},{"location":"monitoring/#stack-components","title":"Stack Components","text":""},{"location":"monitoring/#prometheus","title":"Prometheus","text":"<ul> <li>Time-series database for metrics collection</li> <li>Scrapes metrics from multiple exporters every 15 seconds</li> <li>15-day data retention</li> <li>HTTP API for querying metrics</li> <li>Alert rule evaluation with 15+ production-ready alerts</li> </ul>"},{"location":"monitoring/#grafana","title":"Grafana","text":"<ul> <li>Visualization platform for metrics dashboards</li> <li>Pre-configured Prometheus datasource</li> <li>Auto-provisioned dashboards</li> <li>Dark theme by default</li> <li>Supports importing from grafana.com</li> </ul>"},{"location":"monitoring/#alertmanager","title":"AlertManager","text":"<ul> <li>Alert routing and notification system</li> <li>Slack integration for critical/warning alerts</li> <li>Alert grouping and inhibition rules</li> <li>Silencing and acknowledgment support</li> <li>Production-ready alert receiver configuration</li> </ul>"},{"location":"monitoring/#node-exporter","title":"Node Exporter","text":"<ul> <li>Exports host system metrics: CPU, memory, disk I/O, network</li> <li>Runs in host network mode for accurate data collection</li> <li>Deployed to remote hosts via Ansible automation</li> </ul>"},{"location":"monitoring/#cadvisor","title":"cAdvisor","text":"<ul> <li>Container metrics for Docker</li> <li>Resource usage, performance characteristics, and running containers</li> <li>Built-in web UI</li> </ul>"},{"location":"monitoring/#quick-start","title":"Quick Start","text":"<pre><code># From repo root\nmake mon-up\n\n# Access services\n# Grafana:       http://localhost:3001\n# Prometheus:    http://localhost:9090\n# AlertManager:  http://localhost:9093\n# cAdvisor:      http://localhost:8080\n</code></pre> <p>Default Grafana credentials: <code>admin</code> / (set in <code>.env</code> - use Ansible Vault in production)</p>"},{"location":"monitoring/#architecture","title":"Architecture","text":"<pre><code>graph TB\n    subgraph \"Monitoring Stack\"\n        G[Grafana&lt;br/&gt;:3000]\n        P[Prometheus&lt;br/&gt;:9090]\n        NE[Node Exporter&lt;br/&gt;:9100]\n        CA[cAdvisor&lt;br/&gt;:8080]\n    end\n\n    subgraph \"Data Sources\"\n        Host[Host System&lt;br/&gt;CPU, RAM, Disk]\n        Docker[Docker&lt;br/&gt;Containers]\n    end\n\n    Host --&gt;|metrics| NE\n    Docker --&gt;|metrics| CA\n    NE --&gt;|scrape| P\n    CA --&gt;|scrape| P\n    P --&gt;|self-monitor| P\n    P --&gt;|query| G\n\n    style G fill:#f96,stroke:#333,stroke-width:2px\n    style P fill:#e94,stroke:#333,stroke-width:2px</code></pre>"},{"location":"monitoring/#configuration","title":"Configuration","text":""},{"location":"monitoring/#environment-variables","title":"Environment Variables","text":"<p>Create <code>.env</code> from <code>.env.example</code>:</p> <pre><code>cd docker/monitoring-stack\ncp .env.example .env\n</code></pre> <p>Key variables: - <code>GF_SECURITY_ADMIN_PASSWORD</code> - Grafana admin password (required) - <code>GRAFANA_PORT</code> - Grafana web port (default: 3000) - <code>PROMETHEUS_PORT</code> - Prometheus web port (default: 9090)</p>"},{"location":"monitoring/#prometheus-scrape-targets","title":"Prometheus Scrape Targets","text":"<p>Edit <code>prometheus/prometheus.yml</code> to add new scrape targets:</p> <pre><code>scrape_configs:\n  - job_name: my_service\n    static_configs:\n      - targets: [\"service:port\"]\n</code></pre> <p>Reload configuration: <pre><code>curl -X POST http://localhost:9090/-/reload\n</code></pre></p>"},{"location":"monitoring/#adding-grafana-dashboards","title":"Adding Grafana Dashboards","text":"<ol> <li>Manual import via Grafana UI:</li> <li>Navigate to Dashboards \u2192 Import</li> <li>Enter dashboard ID from grafana.com/dashboards</li> <li> <p>Select Prometheus datasource</p> </li> <li> <p>Auto-provision (recommended):    <pre><code># Download dashboard JSON\ncurl -o grafana/provisioning/dashboards/node-exporter-full.json \\\n  https://grafana.com/api/dashboards/1860/revisions/latest/download\n\n# Restart Grafana\ndocker compose restart grafana\n</code></pre></p> </li> </ol> <p>Recommended dashboards: - Node Exporter Full - System metrics - Docker &amp; System Monitoring - Container metrics - cAdvisor - Container resource usage</p>"},{"location":"monitoring/#monitoring-your-infrastructure","title":"Monitoring Your Infrastructure","text":""},{"location":"monitoring/#viewing-metrics","title":"Viewing Metrics","text":"<p>Prometheus Expression Browser: - Navigate to http://localhost:9090 - Use PromQL to query metrics:   <pre><code># CPU usage\nrate(node_cpu_seconds_total{mode=\"idle\"}[5m])\n\n# Memory usage\nnode_memory_MemAvailable_bytes / node_memory_MemTotal_bytes\n\n# Container CPU usage\nrate(container_cpu_usage_seconds_total[5m])\n</code></pre></p> <p>Grafana Dashboards: - Navigate to http://localhost:3000 - Explore \u2192 Dashboards - View pre-configured or imported dashboards</p>"},{"location":"monitoring/#setting-up-alerts","title":"Setting Up Alerts","text":"<p>Production-Ready Alert Rules Included:</p> <p>The monitoring stack comes with 15+ pre-configured alert rules in <code>prometheus/rules/alerts.yml</code>:</p> <p>System Alerts:</p> <ul> <li><code>NodeExporterDown</code> - Node exporter service failure (critical)</li> <li><code>HighCPUUsage</code> - CPU usage &gt;80% for 5 minutes (warning)</li> <li><code>HighMemoryUsage</code> - Memory usage &gt;90% for 5 minutes (critical)</li> <li><code>DiskSpaceLow</code> - Disk space &lt;15% (critical)</li> <li><code>DiskSpaceWarning</code> - Disk space &lt;25% (warning)</li> </ul> <p>Container Alerts:</p> <ul> <li><code>ContainerDown</code> - cAdvisor monitoring failure (critical)</li> <li><code>ContainerHighMemory</code> - Container using &gt;90% of memory limit (warning)</li> </ul> <p>Service Alerts:</p> <ul> <li><code>PrometheusDown</code> - Prometheus self-monitoring failure (critical)</li> <li><code>PrometheusTargetDown</code> - Any scrape target unreachable (warning)</li> <li><code>GrafanaDown</code> - Grafana dashboard unavailable (warning)</li> </ul> <p>Each alert includes:</p> <ul> <li>\u2705 Runbook commands for quick troubleshooting</li> <li>\u2705 Severity labels (critical/warning)</li> <li>\u2705 Clear descriptions of the issue</li> <li>\u2705 Threshold tuning based on best practices</li> </ul> <p>AlertManager Configuration:</p> <p>Configure Slack notifications in <code>alertmanager/alertmanager.yml</code>:</p> <pre><code>receivers:\n  - name: 'slack-critical'\n    slack_configs:\n      - api_url: 'YOUR_SLACK_WEBHOOK_URL'\n        channel: '#homelab-critical'\n</code></pre> <p>See <code>docker/monitoring-stack/alertmanager/README.md</code> for complete setup guide.</p> <p>Custom Alert Rules:</p> <p>Add your own rules in <code>prometheus/alert_rules.yml</code>:</p> <pre><code>groups:\n  - name: system_alerts\n    interval: 30s\n    rules:\n      - alert: HighCPUUsage\n        expr: 100 - (avg by (instance) (rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100) &gt; 80\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High CPU usage detected\"\n</code></pre>"},{"location":"monitoring/#cicd-integration","title":"CI/CD Integration","text":"<p>The monitoring stack includes automated validation in GitHub Actions:</p> <pre><code>docker_compose:\n  runs-on: ubuntu-latest\n  steps:\n    - uses: actions/checkout@v4\n    - name: Validate monitoring docker-compose\n      run: docker compose -f docker/monitoring-stack/docker-compose.yml config\n</code></pre> <p>This ensures: - \u2705 Docker Compose syntax is valid - \u2705 Service definitions are correct - \u2705 Volume and network configurations are valid</p>"},{"location":"monitoring/#operations","title":"Operations","text":""},{"location":"monitoring/#startingstopping","title":"Starting/Stopping","text":"<pre><code># Start\nmake mon-up\n\n# Stop\nmake mon-down\n\n# View logs\nmake mon-logs\n</code></pre>"},{"location":"monitoring/#backup-restore","title":"Backup &amp; Restore","text":"<p>Backup Prometheus data: <pre><code>docker run --rm -v monitoring-stack_prometheus_data:/data \\\n  -v $(pwd):/backup alpine tar czf /backup/prometheus-backup.tar.gz -C /data .\n</code></pre></p> <p>Backup Grafana dashboards: <pre><code>docker run --rm -v monitoring-stack_grafana_data:/data \\\n  -v $(pwd):/backup alpine tar czf /backup/grafana-backup.tar.gz -C /data .\n</code></pre></p> <p>Restore: <pre><code>docker run --rm -v monitoring-stack_prometheus_data:/data \\\n  -v $(pwd):/backup alpine tar xzf /backup/prometheus-backup.tar.gz -C /data\n</code></pre></p>"},{"location":"monitoring/#troubleshooting","title":"Troubleshooting","text":"<p>Check service health: <pre><code>docker compose ps\n</code></pre></p> <p>View logs: <pre><code># All services\nmake mon-logs\n\n# Specific service\ndocker compose logs -f prometheus\n</code></pre></p> <p>Verify Prometheus targets: - Navigate to http://localhost:9090/targets - All targets should show \"UP\" status</p> <p>Reset all data: <pre><code>make mon-down\ndocker volume rm monitoring-stack_prometheus_data monitoring-stack_grafana_data\nmake mon-up\n</code></pre></p>"},{"location":"monitoring/#network-security","title":"Network Security","text":""},{"location":"monitoring/#firewall-configuration","title":"Firewall Configuration","text":"<p>If accessing from remote machines (Fedora/RHEL):</p> <pre><code>sudo firewall-cmd --add-port=3000/tcp --permanent  # Grafana\nsudo firewall-cmd --add-port=9090/tcp --permanent  # Prometheus\nsudo firewall-cmd --reload\n</code></pre>"},{"location":"monitoring/#production-considerations","title":"Production Considerations","text":"<p>For production deployments:</p> <ol> <li>Use HTTPS: Place Nginx reverse proxy in front</li> <li>Authentication: Enable Grafana LDAP/OAuth</li> <li>Network isolation: Use Docker networks properly</li> <li>Secrets management: Use Docker secrets instead of <code>.env</code></li> <li>Persistent storage: Use bind mounts with backup strategy</li> <li>Alerting: Configure Alertmanager for notifications</li> </ol>"},{"location":"monitoring/#extending-the-stack","title":"Extending the Stack","text":""},{"location":"monitoring/#adding-remote-targets","title":"Adding Remote Targets","text":"<p>To monitor remote hosts, install Node Exporter as a systemd service:</p> <pre><code># See ansible/roles/monitoring role (future addition)\n# Will deploy node_exporter to remote hosts via Ansible\n</code></pre>"},{"location":"monitoring/#integration-with-other-services","title":"Integration with Other Services","text":"<p>Add scrape configs for: - Nginx: nginx-prometheus-exporter - PostgreSQL: postgres_exporter - Redis: redis_exporter - Custom apps: Prometheus client libraries</p> <p>Example: <pre><code>scrape_configs:\n  - job_name: nginx\n    static_configs:\n      - targets: [\"nginx-exporter:9113\"]\n</code></pre></p>"},{"location":"monitoring/#deploying-node-exporter-to-remote-hosts","title":"Deploying Node Exporter to Remote Hosts","text":"<p>Use the included Ansible role to automatically deploy node_exporter:</p> <pre><code># Deploy to all managed hosts\ncd ansible\nansible-playbook playbooks/deploy-monitoring.yml\n\n# Generate Prometheus targets from inventory\npython3 ../scripts/generate_prometheus_targets.py inventories/hosts\n</code></pre> <p>This installs node_exporter as a systemd service with:</p> <ul> <li>\u2705 Automatic firewall configuration</li> <li>\u2705 Security hardening</li> <li>\u2705 Health check verification</li> </ul> <p>See the monitoring role on GitHub for details.</p>"},{"location":"monitoring/#references","title":"References","text":"<ul> <li>Prometheus Documentation</li> <li>Grafana Documentation</li> <li>Node Exporter</li> <li>cAdvisor</li> <li>PromQL Basics</li> </ul>"},{"location":"monitoring/#next-steps","title":"Next Steps","text":"<ul> <li> Production AlertManager with Slack \u2705</li> <li> 15+ Alert rules with runbooks \u2705</li> <li> Deploy node_exporter to remote hosts via Ansible \u2705</li> <li> Secrets management with Ansible Vault \u2705</li> <li> Automated backup/restore scripts \u2705</li> <li> Import pre-built Grafana dashboards (Node Exporter Full, Docker)</li> <li> Configure Nginx reverse proxy with SSL</li> <li> Log aggregation with Loki + Promtail</li> <li> Distributed tracing with Tempo</li> </ul>"},{"location":"pipelines/","title":"Pipelines","text":"<p>Flow: lint \u2192 plan \u2192 approve \u2192 apply \u2192 configure \u2192 smoke</p> <ul> <li>Lint: pre-commit (TFLint, Checkov, Ansible-lint, Hadolint)</li> <li>Plan/Apply: Terraform with remote backend (planned)</li> <li>Configure: Ansible targets AWS/Proxmox from TF outputs</li> <li>Deploy: Reverse proxy + sample app</li> <li>Smoke: curl healthchecks (non-200 fails the job)</li> </ul>"},{"location":"projects/","title":"Projects","text":""},{"location":"projects/#quick-links","title":"\ud83d\udc47 Quick links","text":"<ul> <li>Terraform Module: <code>terraform/modules/ec2_minimal/</code></li> <li>AWS Example: <code>terraform/aws-ec2/</code></li> <li>Ansible Monitoring Role: <code>ansible/roles/monitoring/</code></li> <li>Ansible Security Role: <code>ansible/roles/secure/</code></li> <li>Monitoring Stack: <code>docker/monitoring-stack/</code></li> <li>Reverse Proxy Demo: <code>docker/reverse-proxy/</code></li> </ul>"},{"location":"projects/#monitoring-stack-prometheus-grafana","title":"Monitoring Stack: Prometheus + Grafana","text":"<p>What it does</p> <ul> <li>Full observability stack with Prometheus, Grafana, Node Exporter, and cAdvisor</li> <li>Auto-provisioned Grafana datasources and dashboards</li> <li>SELinux/Fedora compatible configurations</li> <li>Makefile commands for easy management</li> </ul> <p>Try it <pre><code>make mon-up\n# Access Grafana at http://localhost:3001\n</code></pre></p>"},{"location":"projects/#ansible-monitoring-role","title":"Ansible: Monitoring Role","text":"<p>What it does</p> <ul> <li>Deploys Prometheus Node Exporter to remote hosts</li> <li>Installs as systemd service with security hardening</li> <li>Auto-configures firewall (firewalld/ufw)</li> <li>Idempotent deployment with version management</li> </ul> <p>Try it <pre><code>cd ansible\nansible-playbook playbooks/deploy-monitoring.yml\n</code></pre></p>"},{"location":"projects/#terraform-ec2-minimal","title":"Terraform: EC2 minimal","text":"<p>What it does</p> <ul> <li>IMDSv2 required, EBS optimized, encrypted root volume  </li> <li>Optional SSM instance profile (zero-SSH)  </li> <li>Outputs public IP / instance ID</li> </ul> <p>Try it <pre><code>cd terraform/aws-ec2\nterraform init -backend=false\nterraform plan -var key_name=MY_KEY\n</code></pre></p>"},{"location":"reverse-proxy/","title":"Docker &amp; Reverse Proxy","text":"<p>This repository includes a lightweight container platform running internal services behind a reverse proxy.</p>"},{"location":"reverse-proxy/#core-components","title":"\u2705 Core Components","text":"Component Purpose Docker Engine / Compose Container runtime &amp; orchestration Nginx Reverse Proxy Front door to services whoami test service Demo backend to validate routing Health checks Validate uptime + internal routing"},{"location":"reverse-proxy/#folder-structure","title":"\ud83e\uddf1 Folder Structure","text":"<p>```bash docker/reverse-proxy/ \u251c\u2500 docker-compose.yml \u2514\u2500 nginx/    \u2514\u2500 conf.d/       \u2514\u2500 whoami.conf</p> <p>flowchart LR User[Client] --&gt; Proxy[Nginx Reverse Proxy] Proxy --&gt; whoami[Test Container] Proxy --&gt; OtherApps[Future Apps (Grafana, Wazuh, etc)]</p> <p>\ud83d\udd10 Reverse Proxy Config (Nginx) server {   listen 80;   server_name _;</p> <p>location / {     proxy_pass http://whoami:80;     proxy_set_header Host $host;     proxy_set_header X-Real-IP $remote_addr;     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;     proxy_set_header X-Forwarded-Proto $scheme;   } }</p> <p>\ud83d\ude80 Deployment</p> <p>cd docker/reverse-proxy docker-compose up -d</p> <p>\ud83e\uddea Smoke Test</p> <p>curl -sI http://localhost:8080 | head -n 1 curl http://localhost:8080</p> <p>\u2705 Live Proof</p> <p>See docs/images/ for screenshot</p>"},{"location":"security/","title":"Container Security Scanning with Trivy","text":"<p>This repository uses Trivy to scan Docker images for security vulnerabilities as part of the CI/CD pipeline.</p>"},{"location":"security/#what-is-trivy","title":"What is Trivy?","text":"<p>Trivy is a comprehensive security scanner for: - Container images (Docker, OCI) - Filesystems and Git repositories - Vulnerabilities (CVE database) - Misconfigurations (Kubernetes, Docker, Terraform) - Secrets and sensitive information</p>"},{"location":"security/#scanning-strategy","title":"Scanning Strategy","text":""},{"location":"security/#cicd-integration","title":"CI/CD Integration","text":"<p>Every push triggers automatic vulnerability scans in GitHub Actions for:</p> <ul> <li>Prometheus (<code>prom/prometheus:latest</code>)</li> <li>Grafana (<code>grafana/grafana:latest</code>)</li> <li>AlertManager (<code>prom/alertmanager:latest</code>)</li> <li>Node Exporter (<code>prom/node-exporter:latest</code>)</li> <li>cAdvisor (<code>gcr.io/cadvisor/cadvisor:latest</code>)</li> </ul> <p>Scans focus on HIGH and CRITICAL severity vulnerabilities.</p>"},{"location":"security/#local-scanning","title":"Local Scanning","text":"<p>Run security scans locally before pushing:</p> <pre><code># Using Makefile\nmake security-scan\n\n# Or directly\n./scripts/trivy-scan.sh\n</code></pre>"},{"location":"security/#installation","title":"Installation","text":""},{"location":"security/#fedorarhel","title":"Fedora/RHEL","text":"<pre><code>sudo dnf install -y trivy\n</code></pre>"},{"location":"security/#ubuntudebian","title":"Ubuntu/Debian","text":"<pre><code># Add repository\nwget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | gpg --dearmor | sudo tee /usr/share/keyrings/trivy.gpg &gt; /dev/null\necho \"deb [signed-by=/usr/share/keyrings/trivy.gpg] https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main\" | sudo tee -a /etc/apt/sources.list.d/trivy.list\n\n# Install\nsudo apt-get update\nsudo apt-get install trivy\n</code></pre>"},{"location":"security/#macos","title":"macOS","text":"<pre><code>brew install trivy\n</code></pre>"},{"location":"security/#usage","title":"Usage","text":""},{"location":"security/#scan-a-single-image","title":"Scan a Single Image","text":"<pre><code># Basic scan\ntrivy image grafana/grafana:latest\n\n# Only high and critical vulnerabilities\ntrivy image --severity HIGH,CRITICAL grafana/grafana:latest\n\n# Output as JSON\ntrivy image --format json --output results.json grafana/grafana:latest\n\n# Scan and exit with error if vulnerabilities found\ntrivy image --exit-code 1 --severity CRITICAL grafana/grafana:latest\n</code></pre>"},{"location":"security/#scan-docker-compose-stack","title":"Scan Docker Compose Stack","text":"<pre><code># Extract images from docker-compose.yml\ndocker compose -f docker/monitoring-stack/docker-compose.yml config --images | xargs -I {} trivy image {}\n</code></pre>"},{"location":"security/#scan-specific-vulnerability-types","title":"Scan Specific Vulnerability Types","text":"<pre><code># OS packages only\ntrivy image --vuln-type os grafana/grafana:latest\n\n# Application dependencies only  \ntrivy image --vuln-type library grafana/grafana:latest\n\n# Both\ntrivy image --vuln-type os,library grafana/grafana:latest\n</code></pre>"},{"location":"security/#understanding-results","title":"Understanding Results","text":""},{"location":"security/#severity-levels","title":"Severity Levels","text":"<ul> <li>CRITICAL: Immediate action required - exploitable vulnerability</li> <li>HIGH: Patch soon - significant security risk</li> <li>MEDIUM: Schedule patching - moderate risk</li> <li>LOW: Informational - minimal risk</li> <li>UNKNOWN: Not yet assessed by CVE database</li> </ul>"},{"location":"security/#sample-output","title":"Sample Output","text":"<pre><code>grafana/grafana:latest (debian 12.1)\n\nTotal: 45 (HIGH: 12, CRITICAL: 3)\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502     Library      \u2502 Vulnerability  \u2502 Severity \u2502 Installed Version \u2502 Fixed Version \u2502        Title         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 openssl          \u2502 CVE-2024-1234  \u2502 CRITICAL \u2502 1.1.1n            \u2502 1.1.1p        \u2502 OpenSSL security...  \u2502\n\u2502 libcurl          \u2502 CVE-2024-5678  \u2502 HIGH     \u2502 7.68.0            \u2502 7.74.0        \u2502 curl security flaw   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"security/#remediation-workflow","title":"Remediation Workflow","text":""},{"location":"security/#1-review-scan-results","title":"1. Review Scan Results","text":"<pre><code># Generate detailed report\ntrivy image --format json --output scan-report.json grafana/grafana:latest\n\n# View critical vulnerabilities only\ntrivy image --severity CRITICAL grafana/grafana:latest\n</code></pre>"},{"location":"security/#2-check-for-updates","title":"2. Check for Updates","text":"<pre><code># Pull latest image\ndocker pull grafana/grafana:latest\n\n# Rescan\ntrivy image grafana/grafana:latest\n</code></pre>"},{"location":"security/#3-pin-specific-versions","title":"3. Pin Specific Versions","text":"<p>If <code>latest</code> has critical vulnerabilities, pin to a specific version:</p> <pre><code># docker-compose.yml\nservices:\n  grafana:\n    image: grafana/grafana:10.2.3  # Pinned version instead of :latest\n</code></pre>"},{"location":"security/#4-track-in-issues","title":"4. Track in Issues","text":"<p>For unfixed vulnerabilities:</p> <ol> <li>Check if upstream project has a fix</li> <li>Monitor CVE database for patches</li> <li>Consider temporary workarounds</li> <li>Document accepted risks</li> </ol>"},{"location":"security/#cicd-configuration","title":"CI/CD Configuration","text":""},{"location":"security/#github-actions-workflow","title":"GitHub Actions Workflow","text":"<pre><code>security_scan:\n  runs-on: ubuntu-latest\n  permissions:\n    contents: read\n    security-events: write\n  steps:\n    - uses: actions/checkout@v4\n\n    - name: Run Trivy Scanner\n      uses: aquasecurity/trivy-action@master\n      with:\n        image-ref: 'grafana/grafana:latest'\n        format: 'table'\n        exit-code: '0'  # Change to '1' to fail pipeline on vulnerabilities\n        severity: 'CRITICAL,HIGH'\n</code></pre>"},{"location":"security/#exit-code-strategy","title":"Exit Code Strategy","text":"<ul> <li><code>exit-code: 0</code> - Informational (doesn't fail build)</li> <li><code>exit-code: 1</code> - Fail build if vulnerabilities found (strict mode)</li> </ul> <p>Current Setup: Informational mode (<code>0</code>) for visibility without blocking deployments.</p> <p>Production Recommendation: Use <code>exit-code: 1</code> for production branches.</p>"},{"location":"security/#automation","title":"Automation","text":""},{"location":"security/#pre-commit-hook","title":"Pre-commit Hook","text":"<p>Add to <code>.pre-commit-config.yaml</code>:</p> <pre><code>- repo: local\n  hooks:\n    - id: trivy-scan\n      name: Trivy Security Scan\n      entry: ./scripts/trivy-scan.sh\n      language: script\n      pass_filenames: false\n</code></pre>"},{"location":"security/#scheduled-scans","title":"Scheduled Scans","text":"<p>Add to GitHub Actions for weekly scans:</p> <pre><code>on:\n  schedule:\n    - cron: '0 0 * * 0'  # Weekly on Sunday\n</code></pre>"},{"location":"security/#best-practices","title":"Best Practices","text":""},{"location":"security/#do","title":"\u2705 DO","text":"<ul> <li>Scan images regularly (weekly minimum)</li> <li>Pin image versions in production</li> <li>Monitor upstream security advisories</li> <li>Update base images promptly for critical CVEs</li> <li>Use minimal base images (alpine, distroless)</li> <li>Scan before and after deployment</li> <li>Document accepted risks for unfixed vulnerabilities</li> </ul>"},{"location":"security/#dont","title":"\u274c DON'T","text":"<ul> <li>Use <code>:latest</code> tags in production</li> <li>Ignore CRITICAL vulnerabilities</li> <li>Assume vendor images are secure</li> <li>Skip scans for \"trusted\" images</li> <li>Deploy without knowing vulnerability status</li> </ul>"},{"location":"security/#advanced-usage","title":"Advanced Usage","text":""},{"location":"security/#scan-local-dockerfile","title":"Scan Local Dockerfile","text":"<pre><code>trivy config Dockerfile\n</code></pre>"},{"location":"security/#scan-filesystem","title":"Scan Filesystem","text":"<pre><code>trivy fs /path/to/directory\n</code></pre>"},{"location":"security/#scan-kubernetes-manifests","title":"Scan Kubernetes Manifests","text":"<pre><code>trivy config k8s-deployment.yaml\n</code></pre>"},{"location":"security/#scan-terraform-code","title":"Scan Terraform Code","text":"<pre><code>trivy config terraform/\n</code></pre>"},{"location":"security/#custom-policy","title":"Custom Policy","text":"<p>Create <code>.trivyignore</code> to suppress specific CVEs:</p> <pre><code># .trivyignore\n# Suppress known false positive\nCVE-2024-1234\n\n# Suppress until fix available (document why)\nCVE-2024-5678  # No fix available, mitigated by network policy\n</code></pre>"},{"location":"security/#integration-with-security-tools","title":"Integration with Security Tools","text":""},{"location":"security/#sarif-output-for-github-security-tab","title":"SARIF Output for GitHub Security Tab","text":"<pre><code>- name: Run Trivy Scanner\n  uses: aquasecurity/trivy-action@master\n  with:\n    image-ref: 'grafana/grafana:latest'\n    format: 'sarif'\n    output: 'trivy-results.sarif'\n\n- name: Upload to GitHub Security\n  uses: github/codeql-action/upload-sarif@v2\n  with:\n    sarif_file: 'trivy-results.sarif'\n</code></pre>"},{"location":"security/#slack-notifications","title":"Slack Notifications","text":"<pre><code># Scan and send results to Slack\ntrivy image grafana/grafana:latest --format json | \\\n  jq -r '.Results[] | select(.Vulnerabilities != null) | .Vulnerabilities[] | select(.Severity == \"CRITICAL\")' | \\\n  wc -l | \\\n  xargs -I {} curl -X POST $SLACK_WEBHOOK_URL -d '{\"text\":\"Found {} critical vulnerabilities\"}'\n</code></pre>"},{"location":"security/#metrics-and-reporting","title":"Metrics and Reporting","text":""},{"location":"security/#track-vulnerability-trends","title":"Track Vulnerability Trends","text":"<pre><code># Generate monthly reports\nmkdir -p security-reports/$(date +%Y-%m)\ntrivy image --format json \\\n  --output security-reports/$(date +%Y-%m)/scan-$(date +%Y-%m-%d).json \\\n  grafana/grafana:latest\n</code></pre>"},{"location":"security/#dashboard-metrics","title":"Dashboard Metrics","text":"<p>Track in Prometheus:</p> <ul> <li>Number of images scanned</li> <li>Critical vulnerabilities count</li> <li>Mean time to remediation (MTTR)</li> <li>Scan frequency</li> </ul>"},{"location":"security/#resources","title":"Resources","text":"<ul> <li>Trivy Documentation</li> <li>Trivy GitHub Repository</li> <li>CVE Database</li> <li>National Vulnerability Database</li> <li>Trivy Operator for Kubernetes</li> </ul>"},{"location":"security/#troubleshooting","title":"Troubleshooting","text":""},{"location":"security/#scan-taking-too-long","title":"Scan Taking Too Long","text":"<pre><code># Skip database update if recent\ntrivy image --skip-db-update grafana/grafana:latest\n\n# Use cache\ntrivy image --cache-dir ~/.cache/trivy grafana/grafana:latest\n</code></pre>"},{"location":"security/#database-update-fails","title":"Database Update Fails","text":"<pre><code># Manual database update\ntrivy image --download-db-only\n\n# Clear cache and retry\ntrivy image --clear-cache\n</code></pre>"},{"location":"security/#false-positives","title":"False Positives","text":"<ol> <li>Verify vulnerability applies to your usage</li> <li>Check if already patched in latest version</li> <li>Add to <code>.trivyignore</code> with documentation</li> <li>Report to Trivy if incorrect</li> </ol>"},{"location":"security/#security-scanning-checklist","title":"Security Scanning Checklist","text":"<ul> <li> Trivy installed locally</li> <li> CI/CD integration configured</li> <li> All images scanned before deployment</li> <li> Critical vulnerabilities documented</li> <li> <code>.trivyignore</code> file maintained</li> <li> Scan results reviewed weekly</li> <li> Update schedule established</li> <li> Team notified of critical findings</li> <li> Remediation tracked in issues</li> </ul> <p>Remember: Security scanning is ongoing, not one-time. Regularly update and rescan images as new vulnerabilities are discovered.</p>"},{"location":"terraform/","title":"Terraform Infrastructure","text":"<p>This repo provisions compute both in AWS and Proxmox.</p>"},{"location":"terraform/#components-managed","title":"\u2705 Components Managed","text":"Platform Resources Notes AWS EC2 Instance, networking Terraform Cloud-Init + Ansible bootstrap Proxmox VMs provisioned via Terraform provider Integrates with local homelab"},{"location":"terraform/#folder-structure","title":"\ud83d\uddc2\ufe0f Folder Structure","text":"<p>```bash terraform/ \u251c\u2500 aws-ec2/ \u2502  \u251c\u2500 main.tf \u2502  \u251c\u2500 variables.tf \u2502  \u251c\u2500 outputs.tf \u2502  \u2514\u2500 tests/ \u2514\u2500 modules/    \u2514\u2500 ec2_minimal/       \u251c\u2500 main.tf       \u251c\u2500 variables.tf       \u251c\u2500 outputs.tf       \u2514\u2500 tests/</p> <p>Apply complete! Resources: 2 added, 0 changed, 0 destroyed.</p> <p>Outputs: public_ip = \"X.X.X.X\" instance_id = \"i-abc123\"</p> Feature Status IMDSv2 enforced \u2705 EBS encrypted \u2705 Checkov clean \u2705 No hard-coded creds \u2705 SSM IAM role optional \u2705 <p><code>mermaid flowchart LR Dev --&gt; GitHub GitHub --&gt; CI[Terraform CI Checks] CI --&gt; Plan[terraform plan] Plan --&gt; Gate[Manual Approval] Gate --&gt; Apply[terraform apply] Apply --&gt; AWS[(AWS EC2)] Apply --&gt; Proxmox[(Proxmox VM)]</code>mermaid</p>"}]}